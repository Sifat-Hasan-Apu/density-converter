<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Density Converter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f0f4f8;
      color: #334155;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
  </style>
</head>
<body class="p-4">

  <!-- Main App Card -->
  <div class="bg-white p-6 md:p-10 rounded-xl shadow-lg w-full max-w-md">
    <h1 class="text-3xl md:text-4xl font-extrabold text-center mb-6 text-gray-800">
      Density Converter
    </h1>
    <p class="text-center text-gray-600 mb-8">
      Enter observed density and temperature to get the corrected density at 15째C.
    </p>

    <!-- Input Section -->
    <div class="space-y-6">
      <div>
        <label for="observedDensity" class="block text-sm font-medium text-gray-700 mb-1">
          Observed Density
        </label>
        <input type="number" id="observedDensity" step="0.01" placeholder="e.g., 955.0"
               class="mt-1 block w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-md shadow-sm 
                      focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-colors duration-200">
      </div>

      <div>
        <label for="observedTemperature" class="block text-sm font-medium text-gray-700 mb-1">
          Observed Temperature (째C)
        </label>
        <input type="number" id="observedTemperature" step="0.25" placeholder="e.g., 12.50"
               class="mt-1 block w-full px-4 py-2 bg-gray-50 border border-gray-300 rounded-md shadow-sm 
                      focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-colors duration-200">
      </div>

      <button id="calculateBtn"
              class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-md shadow-lg 
                     transition-all duration-300 ease-in-out transform hover:scale-105">
        Calculate
      </button>
    </div>

    <!-- Result Container -->
    <div id="resultContainer" 
         class="mt-8 p-6 bg-green-50 border-l-4 border-green-400 text-green-800 rounded-md hidden">
      <p class="text-sm font-medium">Result:</p>
      <p id="resultText" class="text-xl font-bold mt-2"></p>
    </div>
    
    <!-- Custom Modal for Alerts -->
    <div id="alertModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full">
      <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
        <div class="mt-3 text-center">
          <h3 id="alertTitle" class="text-lg leading-6 font-medium text-gray-900"></h3>
          <div class="mt-2 px-7 py-3">
            <p id="alertMessage" class="text-sm text-gray-500"></p>
          </div>
          <div class="items-center px-4 py-3">
            <button id="closeAlertBtn" 
                    class="px-4 py-2 bg-blue-500 text-white text-base font-medium rounded-md w-full shadow-sm 
                           hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
              OK
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="mt-8 text-center">
    <p class="text-lg font-semibold text-gray-700">
      Powered by <span class="text-blue-600">Sifat Hasan Apu</span>
    </p>
    <p class="text-xs text-gray-500 mt-2">
      United Payra Power Limited
    </p>
  </footer>

  <!-- JavaScript -->
  <script>
    const densityInput = document.getElementById('observedDensity');
    const temperatureInput = document.getElementById('observedTemperature');
    const calculateBtn = document.getElementById('calculateBtn');
    const resultContainer = document.getElementById('resultContainer');
    const resultText = document.getElementById('resultText');
    const alertModal = document.getElementById('alertModal');
    const alertTitle = document.getElementById('alertTitle');
    const alertMessage = document.getElementById('alertMessage');
    const closeAlertBtn = document.getElementById('closeAlertBtn');
    
    // Show custom alert modal
    function showAlert(title, message) {
      alertTitle.textContent = title;
      alertMessage.textContent = message;
      alertModal.classList.remove('hidden');
    }

    // Close alert modal
    closeAlertBtn.addEventListener('click', () => {
      alertModal.classList.add('hidden');
    });

    // Correction factor interpolation
    function getCorrectionFactor(observedDensity) {
      const knownPoints = [
        { density: 955.5, factor: 0.65714 },
        { density: 967.6, factor: 0.6548 },
      ];

      if (observedDensity <= knownPoints[0].density) {
        return knownPoints[0].factor;
      }
      if (observedDensity >= knownPoints[1].density) {
        return knownPoints[1].factor;
      }
      
      const x1 = knownPoints[0].density;
      const y1 = knownPoints[0].factor;
      const x2 = knownPoints[1].density;
      const y2 = knownPoints[1].factor;

      const slope = (y2 - y1) / (x2 - x1);
      return y1 + slope * (observedDensity - x1);
    }

    // Main calculation
    function calculateCorrectedDensity(observedDensity, observedTemperature) {
      const tempDiff = observedTemperature - 15.0;
      const correctionFactorPerDegree = getCorrectionFactor(observedDensity);
      return (observedDensity + (tempDiff * correctionFactorPerDegree)).toFixed(1);
    }

    // Button click event
    calculateBtn.addEventListener('click', () => {
      const observedDensity = parseFloat(densityInput.value);
      const observedTemperature = parseFloat(temperatureInput.value);

      if (isNaN(observedDensity) || isNaN(observedTemperature)) {
        showAlert("Input Error", "Please enter valid numbers.");
        resultContainer.classList.add('hidden');
        return;
      }

      if (observedTemperature < 12 || observedTemperature > 70) {
        showAlert("Temperature Range", "This app works for temperatures between 12째C and 70째C only.");
        resultContainer.classList.add('hidden');
        return;
      }

      const correctedDensity = calculateCorrectedDensity(observedDensity, observedTemperature);
      resultText.textContent = `Density at 15 Degree Cel is : ${correctedDensity}`;

      resultContainer.classList.remove('hidden');
    });

    // Clear result on input change
    densityInput.addEventListener('input', () => {
      resultContainer.classList.add('hidden');
    });
    temperatureInput.addEventListener('input', () => {
      resultContainer.classList.add('hidden');
    });
  </script>
</body>
</html>

